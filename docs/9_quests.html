<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; Airflow Sandbox Training in the cloud 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="3_engineering_notes.html" />
    <link rel="prev" title="&lt;no title&gt;" href="2_env_vars.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Airflow Sandbox Training in the cloud
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul class="simple">
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Airflow Sandbox Training in the cloud</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/9_quests.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Quests</p>
<p>## 0.0 Understanding Variables</p>
<ul class="simple">
<li><dl class="simple">
<dt>env variables - set in the container</dt><dd><ul>
<li><p>set ahead of time with docker compose</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>metastore</dt><dd><ul>
<li><p>nav localhost:8080- admin-&gt;variables</p></li>
<li><p>nav localhost:8080- admin-&gt;macros</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>reference <a class="reference external" href="https://www.youtube.com/watch?v=bRaMAD5vx3g">https://www.youtube.com/watch?v=bRaMAD5vx3g</a></p></li>
</ul>
<dl class="simple">
<dt>## 0. Stac Search Task</dt><dd><ul class="simple">
<li><p>People - Adrian Gould</p></li>
<li><dl class="simple">
<dt>Code Study</dt><dd><ul>
<li><p><a class="reference external" href="https://smartgitlab.com/blacksky/smartflow/-/blob/main/dags/Demo_Shinbashi.py">https://smartgitlab.com/blacksky/smartflow/-/blob/main/dags/Demo_Shinbashi.py</a></p></li>
<li><p>clone the repo</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Stub out Noops for main tasks in devcode</dt><dd><ul>
<li><p>DEPLOY TO airflow - with makefile</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>### Building the Docker smartflow
- clone adrians github - DONE
- build in ~/work (build_docker dir) - DONE</p>
<blockquote>
<div><ul class="simple">
<li><p>add tony additions</p></li>
<li><p>capture all this in build_docker/Makefile</p></li>
</ul>
</div></blockquote>
<p>#### ISSUE:
1. The docker environment is slightly different than the smart based environment</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>the jinja variables</dt><dd><ul>
<li><p>pount to s3 buckets</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>they use kubernetes</dt><dd><ul>
<li><p>the sandbox uses Celery</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>We need to train ourselves on all things  Airflow, Kubernetes, docker-compose - meta-stores - celery</p></li>
<li><p>We need to learn how to write Airflow operators and know which operators and task structires make sense in a best-practices sort of way.</p></li>
</ol>
<p>### Docker Compose Trial Airflow - Celery</p>
<p>### Quickstart</p>
<ul class="simple">
<li><p><a class="reference external" href="https://airflow.apache.org/docs/apache-airflow/stable/start/docker.html">https://airflow.apache.org/docs/apache-airflow/stable/start/docker.html</a></p></li>
</ul>
<p>## 1 Airflow Study</p>
<ol class="arabic simple">
<li><p>airflow book - Data Pipelines with Apache Airflow - Harenslak</p></li>
</ol>
<p>### Prerequisites <a href="#id1"><span class="problematic" id="id2">*</span></a>args and <a href="#id3"><span class="problematic" id="id4">*</span></a>kwargs</p>
<ul class="simple">
<li><p><a class="reference external" href="https://code.tutsplus.com/articles/understanding-args-and-kwargs-in-python--cms-29494">https://code.tutsplus.com/articles/understanding-args-and-kwargs-in-python–cms-29494</a></p></li>
<li><p>What Are Args?</p></li>
</ul>
<p><a href="#id5"><span class="problematic" id="id6">*</span></a>args are used to pass non-keyword arguments. Examples of non-keyword arguments are fun(3,4), fun(“foo”,”bar”).</p>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a>args are usually used as a measure to prevent the program from crashing if we don’t know how many arguments will be passed to the function. This is used in C++ as well as other programming languages.
What Are Kwargs?</p>
<ul class="simple">
<li><p><a href="#id9"><span class="problematic" id="id10">**</span></a>kwargs is a dictionary of keyword arguments.</p></li>
</ul>
<p>The ** allows us to pass any number of keyword arguments. A keyword argument is basically a dictionary.</p>
<p>An example of a keyword argument is fun(foo=2,bar=7).</p>
<ul class="simple">
<li><p>You can call the function with any arguments you want.</p></li>
</ul>
<p><a href="#id11"><span class="problematic" id="id12">``</span></a>` python
def capital_cities(<a href="#id13"><span class="problematic" id="id14">**</span></a>kwargs):</p>
<blockquote>
<div><p># initialize an empty list to store the result
result = []
for key, value in kwargs.items():</p>
<blockquote>
<div><p>result.append(“The capital city of {} is {}”.format (key,value))</p>
</div></blockquote>
<p>return result</p>
</div></blockquote>
<p>print (capital_cities(China = “Beijing”,Cairo = “Egypt”,Rome = “Italy”))</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
<p>### Source</p>
<p>References to elements in the code, scripts, or specific Airflow classes/variables/values are often in italics to help distinguish them from the surrounding text. Source code for all examples and instructions to run them using Docker and Docker Compose are available in our GitHub repository (
- <a class="reference external" href="https://github.com/BasPH/data-pipelines-with-apache-airflow">https://github.com/BasPH/data-pipelines-with-apache-airflow</a>) and can be downloaded via the book’s website (
- www.manning.com/books/data-pipelines-with-apache-airflow).</p>
<p>### Getting Started</p>
<ul class="simple">
<li><p>data pipelines</p></li>
<li><p>airflow’s role</p></li>
<li><p>compare to other technologies</p></li>
<li><p>scheduling semantics</p></li>
<li><p>templating</p></li>
<li><p>then on to part 2</p></li>
<li><p>airflow is an orchetrator - the spider in the web</p></li>
<li><dl class="simple">
<dt>weather task example</dt><dd><ul>
<li><p>fetch weather data via ap</p></li>
<li><p>clean and organize weather data</p></li>
<li><p>push cleanded data to weather dashboard</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>&gt; This type of graph is typically called a directed acyclic graph (DAG), as the graph contains directed edges and does not contain any loops or cycles (acyclic).</p>
<p>Name Originated at1 Workflows defined in Written in Scheduling Backfilling User interface2 Installation platform Horizontally scalable
- Airflow Airbnb Python Python Yes Yes Yes Anywhere Yes
- Argo Applatix YAML Go Third party3 Yes Kubernetes Yes
- Azkaban LinkedIn YAML Java Yes No Yes Anywhere Conductor Netflix JSON Java No Yes Anywhere Yes
- Luigi Spotify Python Python No Yes Yes Anywhere Yes
- Make Custom DSL C No No No Anywhere No
- Metaflow Netflix Python Python No No Anywhere Yes
- Nifi NSA UI Java Yes No Yes Anywhere Yes Oozie</p>
<p>de Ruiter, Julian; Harenslak, Bas. Data Pipelines with Apache Airflow (p. 9). Manning. Kindle Edition.</p>
<p>### Introducing Airflow</p>
<ul class="simple">
<li><dl class="simple">
<dt>define DAGS using python code.</dt><dd><ul>
<li><p>set of tasks</p></li>
<li><p>metadata</p></li>
<li><p>scheduling</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>airflow extensions -</dt><dd><ul>
<li><p>databases</p></li>
<li><p>cloud services</p></li>
<li><p>notification linkages</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>#### 3 main components - scheduler; workers; webserver</p>
<ul class="simple">
<li><p>airflow metastore(database) key component for linkages</p></li>
</ul>
<p>### Why Airflow PROS/CONS</p>
<p>o
#### Reasons to choose Airflow In the past sections,</p>
<p>we’ve already described several key feature</p>
<p>s that make Airflow ideal for implementing batch-oriented data pipelines. In summary, these include the following:</p>
<ul class="simple">
<li><p>The ability to implement pipelines using Python code allows you to create arbitrarily complex pipelines using anything you can dream up in Python.</p></li>
<li><dl class="simple">
<dt>The Python foundation of Airflow makes it easy to extend and add integrations with many different systems.</dt><dd><ul>
<li><p>In fact, the Airflow community has already developed a rich collection of extensions that allow Airflow to integrate with many different types of databases, cloud services, and so on.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Rich scheduling semantics allow you to run your pipelines at regular intervals and build efficient pipelines that use incremental processing to avoid expensive recomputation of existing results.</p></li>
<li><p>Features such as backfilling enable you to easily (re)process historical data, allowing you to recompute any derived data sets after making changes to your code.</p></li>
<li><p>Airflow’s rich web interface provides an easy view for monitoring the results of your pipeline runs and debugging any failures that may have occurred.</p></li>
<li><p>Open Source !</p></li>
<li><p>Famous Company Adoption AIRBNB etc…</p></li>
</ul>
<p>#### Reasons not to choose Airflow</p>
<ul class="simple">
<li><p>Not as hood for highly fynamic pipelines</p></li>
<li><p>Require Python rerxperience</p></li>
<li><p>I would add the significant technology stack is a barrier - for small teams or silo’ed teams …</p></li>
</ul>
<p>de Ruiter, Julian; Harenslak, Bas. Data Pipelines with Apache Airflow (p. 17). Manning. Kindle Edition.</p>
<p>Airflow consists of three core components:
- the webserver,
- the scheduler,
- and the worker processes,
which work together to schedule tasks from your data pipelines and help you monitor their results.</p>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="2_env_vars.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="3_engineering_notes.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Tony Butzer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>